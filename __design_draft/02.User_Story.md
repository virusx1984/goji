<!-- __design_draft/02.User_Story.md -->
# Goji系统 - 核心功能与用户故事 (V1.1)

本文档通过用户故事的形式，定义了Goji产能规划系统的核心功能模块和业务价值，并已集成数据范围权限和操作审计日志的相关需求。

---

### **1. 所有用户 (All Users)**

这些是适用于系统中每一个用户的基本自助服务功能。

* **用户登录与登出**
    * **作为一个用户**, 我想要 **通过输入用户名和密码来登录系统**, 以便 **访问我被授权的功能和数据**。
    * **作为一个用户**, 我想要 **点击“登出”按钮来安全地退出系统**, 以便 **保护我的账户信息**。
* **修改个人密码**
    * **作为一个用户**, 我想要 **在个人设置页面中，通过输入旧密码和新密码来修改我自己的登录密码**, 以便 **定期维护账户安全**。
* **忘记密码**
    * **作为一个用户**, 我想要 **在登录页面找到一个“忘记密码”的链接**，通过输入我的邮箱来接收密码重置指引, 以便 **在我忘记密码时能够自助找回账户**。

---

### **2. 系统管理员 (Admin)**

管理员负责维护系统的基础数据、用户权限和整体健康状况。

#### **用户与角色管理**

* **查看用户列表**
    * **作为一个管理员**, 我想要 **查看一个包含所有用户的列表**，并能通过用户名、姓名、状态等进行筛选, 以便 **快速概览和查找系统账户**。
* **创建与管理用户**
    * **作为一个管理员**, 我想要 **创建一个新用户**，并为其设置初始密码。
    * **作为一个管理员**, 我想要 **编辑一个已存在用户的信息**，例如修改其姓名或邮箱。
    * **作为一个管理员**, 我想要 **激活或禁用一个用户的账户**，以方便地控制其访问权限。
    * **作为一个管理员**, 我想要 **为某个用户重置密码**。
* **角色与权限分配**
    * **作为一个管理员**, 我想要 **创建和定义不同的用户角色** (如计划员、工程师)。
    * **作为一个管理员**, 我想要 **为每个角色分配具体的操作权限** (如“编辑工艺路线”、“查看报表”等)。
    * **作为一个管理员**, 我想要 **为用户分配一个或多个角色**，以赋予其相应的操作权限。
* **数据范围权限管理**
    * **作为一个管理员**, 我想要 **在为用户分配角色时，能够进一步指定这个角色的数据作用范围**（例如，仅限于“东莞一号工厂”）。
    * **以便** 该用户登录后，只能看到和操作其被授权范围内的数据，实现严格的数据隔离。

#### **菜单管理**

* **管理菜单结构**
    * **作为一个管理员**, 我想要 **在一个可视化的界面中，创建、编辑、删除和拖拽排序** 系统的导航菜单项。
    * **以便** 我能灵活地组织和调整系统的导航结构。
* **关联菜单与权限**
    * **作为一个管理员**, 我想要 **在编辑每一个菜单项时，可以关联一个“访问此菜单所需的权限”**。
    * **以便** 我能精确控制，只有拥有特定权限的角色，才能在界面上看到对应的菜单入口。

#### **系统维护**

* **查看操作审计日志**
    * **作为一个管理员**, 我想要 **有一个审计日志查询界面**，可以根据时间范围、用户、操作类型等条件，来查看系统中的关键操作记录。
    * **以便** 在出现数据错误、需要进行合规审查或追溯操作历史时，能够进行完整的历史追溯。

---

### **3. 计划员 (Planner)**

作为系统的核心使用者，计划员需要强大的可视化和模拟分析工具。

* **产能负荷总览**
    * **作为一个计划员**, 我想要 **在一个可视化的看板上，按天/周/月查看所有关键工作中心的产能负荷率**，并用颜色清晰地标示出超负荷、饱和和正常的资源。
    * **以便** 我能第一时间发现潜在的生产瓶颈。
* **产能占用详情钻取**
    * **作为一个计划员**, 我想要 **点击看板上任何一个工作中心，能够钻取查看其产能被哪些具体的订单或预测所占用**。
    * **以便** 我能进行深入的原因分析。
* **“插单”模拟 (What-if)**
    * **作为一个计划员**, 我想要 **进行“插单”模拟**，输入一个紧急订单的料号、数量和期望交期，然后立即看到它对所有相关工作中心未来负荷的影响。
    * **以便** 我能科学地评估是否有能力接受这个插单，并反馈一个可靠的承诺交期。
* **产能资源调整模拟 (What-if)**
    * **作为一个计划员**, 我想要 **临时调整某个工作中心的可用产能**（如模拟增加班次或设备停机），并立即在负荷图上看到变化带来的影响。
    * **以便** 我能快速地做出产能调整决策。
* **需求管理**
    * **作为一个计划员**, 我想要 **在一个统一的界面上，清晰地看到已确认的销售订单和销售预测**，并能够让订单消耗预测。
    * **以便** 我能获得一个全面的、已剔除重复计算的总需求视图。

---

### **4. 工艺工程师 (Process Engineer)**

作为生产数据的源头定义者，工艺工程师需要高效、精确的工具。

* **工艺路线 (Routing) 创建与版本管理**
    * **作为一个工艺工程师**, 我想要 **为一个新产品（或现有产品的新版本），创建一套完整的工艺路线**，包括定义每一个工序步骤、顺序，并关联到正确的标准工序。
    * **以便** 为生产提供一套标准的、可执行的制造指令。
* **工序物料清单 (BOM) 定义**
    * **作为一个工艺工程师**, 我想要 **在定义每一个工艺步骤时，能够方便地选择该步骤需要消耗的原材料或半成品，并精确定义其消耗定额**。
    * **以便** 物料需求计划(MRP)能够精确计算出生产所需的物料总量。
* **工序资源与工时定义**
    * **作为一个工艺工程师**, 我想要 **在定义每一个工艺步骤时，能够选择一个或多个可以执行此工序的工作中心，并为每个组合设定标准的准备时间和单件加工时间**。
    * **以便** 产能计划能够精确计算出每个工单所需的生产时间。
* **叠构与新产品规划**
    * **作为一个工艺工程师**, 我想要 **为复杂产品（如PCB）定义其层别和叠构关系**。
    * **作为一个工艺工程师**, 我想要 **为新产品（NPI）创建“规划中”的占位产品和“虚拟”工艺路线**，以便在产品设计阶段就能进行初步的产能评估。

---

### **5. 销售人员 (Salesperson)**

销售人员需要系统提供快速、准确的反馈。

* **可承诺量/可承诺交期 (ATP/CTP) 查询**
    * **作为一个销售人员**, 我想要 **在接单前，使用一个简化的查询界面，输入客户想订购的产品和数量，系统能快速地告诉我一个最早的可承诺交期**。
    * **以便** 我能在报价阶段就给客户一个靠谱的交期承诺。
* **订单状态跟踪**
    * **作为一个销售人员**, 我想要 **随时查询我负责的客户所有订单的当前状态**（如“生产中”、“已完工”等）。
    * **以便** 我能及时、准确地回答客户关于订单进度的问询。

---

### **6. 高阶主管 (Executive)**

主管们需要宏观的、高度概括的数据视图，用于支持战略决策。

* **KPI仪表盘**
    * **作为一个高阶主管**, 我想要 **在一个总览仪表盘上，实时查看整个工厂或集团的关键绩效指标（KPI）**，例如：整体产能利用率、订单准时交付率（OTD）等。
    * **以便** 我能快速掌握企业整体的运营健康状况。
* **多维度对比分析**
    * **作为一个高阶主管**, 我想要 **能够按不同的维度（如业务单元BU、工厂集群、具体工厂）来筛选和对比产能负荷与利用率数据**。
    * **以便** 我能发现不同运营单位之间的差异，为优化资源配置、进行战略投资等决策提供数据支持。